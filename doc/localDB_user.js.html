<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: localDB/user.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: localDB/user.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
import Realm from './index';
import { ErrorHandler } from 'core/errorHandlers';
import { LoggerRealm, LoggerConsole } from 'core/loggers';


/***************************************************************************************************/
/* UUID GENERATOR **********************************************************************************/
/***************************************************************************************************/
/**
 *
 * A simple UUID generator. Returns a string.
 *
 * It avoids collision using date in its generator
 *
 * ## Sample code:
 * generateUUID()
 *
 */
function generateUUID() { // Public Domain/MIT
  var d = new Date().getTime();
  if (typeof performance !== 'undefined' &amp;&amp; typeof performance.now === 'function') {
    d += performance.now(); //use high-precision timer if available
  }
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
    var r = (d + Math.random() * 16) % 16 | 0;
    d = Math.floor(d / 16);
    return (c === 'x' ? r : (r &amp; 0x3 | 0x8)).toString(16);
  });
}
/***************************************************************************************************/
/***************************************************************************************************/


/***************************************************************************************************/
/* CREATE USER *************************************************************************************/
/***************************************************************************************************/
/** 
 * 
 * Creates user and stores it to localDB.
 * Creates logs and catches errors to send to ErrorHandler
 * 
 * @constructor UserCreate
 * @extends UserSchema
 * @memberof module:localDB
 *
 * @example
 * UserCreate(params)
 *
 */
export
  const UserCreate = (params) => {
    const loggerTitle = 'localDB - UserCreate';
    const loggerRealm = new LoggerRealm(loggerTitle);
    const loggerConsole = new LoggerConsole(loggerTitle);
    try {
      Realm.write(() => {
        const user = Object.assign({ id: generateUUID() }, params);
        let team = Realm.create('User', user);
      });
      loggerRealm.done();
      loggerConsole.done();
    } catch (e) {
      loggerRealm.error(e);
      loggerConsole.error(e);
      ErrorHandler(loggerRealm.name, e);
    }
  }
/***************************************************************************************************/
/***************************************************************************************************/


/***************************************************************************************************/
/* GET USERS ***************************************************************************************/
/***************************************************************************************************/
/** 
 * 
 * Gets all users from localDB.
 * Creates logs
 * 
 * @constructor UserGetAll
 * @extends UserSchema
 * @memberof module:localDB
 *
 * @example
 * UserGetAll(params)
 *
 */
export
  const UserGetAll = () => {
    const loggerTitle = 'localDB - UserGetAll';
    const loggerRealm = new LoggerRealm(loggerTitle);
    const loggerConsole = new LoggerConsole(loggerTitle);
    const users = Realm.objects('User');
  
    loggerRealm.done();
    loggerConsole.done();
    return Array.from(users);
  }
/***************************************************************************************************/
/***************************************************************************************************/


/***************************************************************************************************/
/* GET USER ****************************************************************************************/
/***************************************************************************************************/
/** 
 * 
 * Gets user and from localDB.
 * Creates logs
 * 
 * @param {string} id
 * 
 * @constructor UserGet
 * @extends UserSchema
 * @memberof module:localDB
 *
 * @example
 * UserGet(params)
 *
 */
export
  const UserGet = (id) => {
    const loggerTitle = 'localDB - UserGet';
    const loggerRealm = new LoggerRealm(loggerTitle);
    const loggerConsole = new LoggerConsole(loggerTitle);
    const user = Realm.objects('User').filtered(`id = "${id}"`)[0];
    
    loggerRealm.done();
    loggerConsole.done();
    return user;
  }
/***************************************************************************************************/
/***************************************************************************************************/


/***************************************************************************************************/
/* UPDATE USER *************************************************************************************/
/***************************************************************************************************/
/** 
 * 
 * Updates user and stores it to localDB.
 * Creates logs and catches errors to send to ErrorHandler
 * Throws errors on invalid keys because the catcher on update with wrong params doesn't react
 * 
 * @param {string} id
 * @param {object} params See UserSchema
 * 
 * @constructor UserUpdate
 * @extends UserSchema
 * @memberof module:localDB
 *
 * @example
 * UserUpdate(id, params)
 *
 */
export
  const UserUpdate = (id, params) => {
    const loggerTitle = 'localDB - UserUpdate';
    const loggerRealm = new LoggerRealm(loggerTitle);
    const loggerConsole = new LoggerConsole(loggerTitle);
    loggerRealm.message(id);
    loggerConsole.message(id);
    try {
      Realm.write(() => {
        let user = Realm.objects('User').filtered(`id = "${id}"`)[0];
        Object.keys(params).forEach(key => {
          if (user[key] === undefined) throw `Key "${key}" not valid`
          else user[key] = params[key]
        })
      })
      loggerRealm.done();
      loggerConsole.done();
    } catch (e) {
      loggerRealm.error(e);
      loggerConsole.error(e);
      ErrorHandler(logRealm.name, e);
    }
  }
/***************************************************************************************************/
/***************************************************************************************************/


/***************************************************************************************************/
/* DELETE USER *************************************************************************************/
/***************************************************************************************************/
/** 
 * 
 * Deletes user from localDB.
 * Creates logs and catches errors to send to ErrorHandler
 * 
 * @param {string} id
 * 
 * @constructor UserUpdate
 * @extends UserSchema
 * @memberof module:localDB
 *
 * @example
 * UserDelete(id)
 *
 */
export
  const UserDelete = (id) => {
    const loggerTitle = 'localDB - UserDelete';
    const loggerRealm = new LoggerRealm(loggerTitle);
    const loggerConsole = new LoggerRealm(loggerTitle);
    try {
      Realm.write(() => {
        const user = Realm.objects('User').filtered(`id = "${id}"`)[0];
        Realm.delete(user);
      })
      loggerRealm.done();
      loggerConsole.done();
    } catch (e) {
      loggerRealm.error(e);
      loggerConsole.error(e);
      ErrorHandler(loggerRealm.name, e);
    }
  }
/***************************************************************************************************/
/***************************************************************************************************/


/***************************************************************************************************/
/* DELETE USERS ************************************************************************************/
/***************************************************************************************************/
/** 
 * 
 * Deletes all users from localDB.
 * Creates logs and catches errors to send to ErrorHandler
 * 
 * @constructor UserDeleteAll
 * @extends UserSchema
 * @memberof module:localDB
 *
 * @example
 * UserDeleteAll(id)
 *
 */
export
  const UserDeleteAll = () => {
    const loggerTitle = 'localDB - UserDeleteAll';
    const loggerRealm = new LoggerRealm(loggerTitle);
    const loggerConsole = new LoggerRealm(loggerTitle);
    try {
      Realm.write(() => {
        const allUsers = Realm.objects('User');
        Realm.delete(allUsers);
      });
      loggerRealm.done();
      loggerConsole.done();
    } catch (e) {
      loggerRealm.error(e);
      loggerConsole.error(e);
      ErrorHandler(loggerRealm.name, e);
    }
  }
/***************************************************************************************************/
/***************************************************************************************************/
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-app.html">app</a></li><li><a href="module-buttons.html">buttons</a></li><li><a href="module-device.html">device</a></li><li><a href="module-errorHandlers.html">errorHandlers</a></li><li><a href="module-localDB.html">localDB</a></li><li><a href="module-loggers.html">loggers</a></li><li><a href="module-servers.html">servers</a></li><li><a href="module-texts.html">texts</a></li><li><a href="module-trackers.html">trackers</a></li></ul><h3>Classes</h3><ul><li><a href="module-app-BuildNumber.html">BuildNumber</a></li><li><a href="module-app-BundleId.html">BundleId</a></li><li><a href="module-app-Name.html">Name</a></li><li><a href="module-app-Version.html">Version</a></li><li><a href="module-app-VersionReadable.html">VersionReadable</a></li><li><a href="module-buttons-Button.html">Button</a></li><li><a href="module-buttons-ButtonLarge.html">ButtonLarge</a></li><li><a href="module-buttons-ButtonMedium.html">ButtonMedium</a></li><li><a href="module-buttons-ButtonRounded.html">ButtonRounded</a></li><li><a href="module-buttons-ButtonRoundedLarge.html">ButtonRoundedLarge</a></li><li><a href="module-buttons-ButtonRoundedMedium.html">ButtonRoundedMedium</a></li><li><a href="module-buttons-ButtonRoundedSmall.html">ButtonRoundedSmall</a></li><li><a href="module-buttons-ButtonSmall.html">ButtonSmall</a></li><li><a href="module-device-Brand.html">Brand</a></li><li><a href="module-device-Carrier.html">Carrier</a></li><li><a href="module-device-Country.html">Country</a></li><li><a href="module-device-Id.html">Id</a></li><li><a href="module-device-Is24Hour.html">Is24Hour</a></li><li><a href="module-device-IsEmulator.html">IsEmulator</a></li><li><a href="module-device-IsTablet.html">IsTablet</a></li><li><a href="module-device-Locale.html">Locale</a></li><li><a href="module-device-Manufacturer.html">Manufacturer</a></li><li><a href="module-device-Model.html">Model</a></li><li><a href="module-device-Name.html">Name</a></li><li><a href="module-device-SystemName.html">SystemName</a></li><li><a href="module-device-SystemVersion.html">SystemVersion</a></li><li><a href="module-device-Timezone.html">Timezone</a></li><li><a href="module-device-TotalMemory.html">TotalMemory</a></li><li><a href="module-device-UniqueId.html">UniqueId</a></li><li><a href="module-device-UserAgent.html">UserAgent</a></li><li><a href="module-errorHandlers-ErrorHandler.html">ErrorHandler</a></li><li><a href="module-localDB.LogCreate.html">LogCreate</a></li><li><a href="module-localDB.LogDeleteAll.html">LogDeleteAll</a></li><li><a href="module-localDB.LogGetAll.html">LogGetAll</a></li><li><a href="module-localDB.LogSchema.html">LogSchema</a></li><li><a href="module-localDB.TeamSchema.html">TeamSchema</a></li><li><a href="module-localDB.UserCreate.html">UserCreate</a></li><li><a href="module-localDB.UserDeleteAll.html">UserDeleteAll</a></li><li><a href="module-localDB.UserGet.html">UserGet</a></li><li><a href="module-localDB.UserGetAll.html">UserGetAll</a></li><li><a href="module-localDB.UserSchema.html">UserSchema</a></li><li><a href="module-localDB.UserUpdate.html">UserUpdate</a></li><li><a href="module-loggers-LoggerAlert.html">LoggerAlert</a></li><li><a href="module-loggers-LoggerConsole.html">LoggerConsole</a></li><li><a href="module-loggers-LoggerRealm.html">LoggerRealm</a></li><li><a href="module-servers-ServerParse.html">ServerParse</a></li><li><a href="module-texts.Text.html">Text</a></li><li><a href="module-texts.Title.html">Title</a></li><li><a href="module-trackers-TrackerParse.html">TrackerParse</a></li></ul><h3>Global</h3><ul><li><a href="global.html#generateUUID">generateUUID</a></li><li><a href="global.html#onIndexChanged">onIndexChanged</a></li><li><a href="global.html#render">render</a></li><li><a href="global.html#styles">styles</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Feb 01 2018 01:31:49 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
